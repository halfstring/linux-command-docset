<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="css/markdown-github.css">
  
</head>
<body>
<h1>
<a id="user-content-watch" class="anchor" href="#watch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>watch</h1>
<p>可以将命令的输出结果输出到标准输出设备，多用于周期性执行命令/定时执行命令</p>
<h2>
<a id="user-content-补充说明" class="anchor" href="#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>补充说明</h2>
<p><strong>watch命令</strong> 以周期性的方式执行给定的指令，指令输出以全屏方式显示。watch是一个非常实用的命令，基本所有的Linux发行版都带有这个小工具，如同名字一样，watch可以帮你监测一个命令的运行结果，省得你一遍遍的手动运行。</p>
<h3>
<a id="user-content-语法" class="anchor" href="#%E8%AF%AD%E6%B3%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>语法</h3>
<div class="highlight highlight-source-shell"><pre>watch(选项)(参数)</pre></div>
<h3>
<a id="user-content-选项" class="anchor" href="#%E9%80%89%E9%A1%B9" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>选项</h3>
<div class="highlight highlight-source-shell"><pre>-n <span class="pl-c"><span class="pl-c">#</span> 或--interval  watch缺省每2秒运行一下程序，可以用-n或-interval来指定间隔的时间。</span>
-d <span class="pl-c"><span class="pl-c">#</span> 或--differences  用-d或--differences 选项watch 会高亮显示变化的区域。 而-d=cumulative选项会把变动过的地方(不管最近的那次有没有变动)都高亮显示出来。</span>
-t <span class="pl-c"><span class="pl-c">#</span> 或-no-title  会关闭watch命令在顶部的时间间隔,命令，当前时间的输出。</span>
-h, --help <span class="pl-c"><span class="pl-c">#</span> 查看帮助文档</span></pre></div>
<h3>
<a id="user-content-参数" class="anchor" href="#%E5%8F%82%E6%95%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>参数</h3>
<p>指令：需要周期性执行的指令。</p>
<h3>
<a id="user-content-实例" class="anchor" href="#%E5%AE%9E%E4%BE%8B" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>实例</h3>
<div class="highlight highlight-source-shell"><pre>watch -n 1 -d netstat -ant       <span class="pl-c"><span class="pl-c">#</span> 命令：每隔一秒高亮显示网络链接数的变化情况</span>
watch -n 1 -d <span class="pl-s"><span class="pl-pds">'</span>pstree|grep http<span class="pl-pds">'</span></span> <span class="pl-c"><span class="pl-c">#</span> 每隔一秒高亮显示http链接数的变化情况。 后面接的命令若带有管道符，需要加''将命令区域归整。</span>
watch <span class="pl-s"><span class="pl-pds">'</span>netstat -an | grep:21 | \ grep&lt;模拟攻击客户机的IP&gt;| wc -l<span class="pl-pds">'</span></span> <span class="pl-c"><span class="pl-c">#</span> 实时查看模拟攻击客户机建立起来的连接数</span>
watch -d <span class="pl-s"><span class="pl-pds">'</span>ls -l|grep scf<span class="pl-pds">'</span></span>       <span class="pl-c"><span class="pl-c">#</span> 监测当前目录中 scf' 的文件的变化</span>
watch -n 10 <span class="pl-s"><span class="pl-pds">'</span>cat /proc/loadavg<span class="pl-pds">'</span></span> <span class="pl-c"><span class="pl-c">#</span> 10秒一次输出系统的平均负载</span>
watch uptime
watch -t uptime
watch -d -n 1 netstat -ntlp
watch -d <span class="pl-s"><span class="pl-pds">'</span>ls -l | fgrep goface<span class="pl-pds">'</span></span>     <span class="pl-c"><span class="pl-c">#</span> 监测goface的文件</span>
watch -t -differences=cumulative uptime
watch -n 60 from            <span class="pl-c"><span class="pl-c">#</span> 监控mail</span>
watch -n 1 <span class="pl-s"><span class="pl-pds">"</span>df -i;df<span class="pl-pds">"</span></span>       <span class="pl-c"><span class="pl-c">#</span> 监测磁盘inode和block数目变化情况</span></pre></div>
<p>FreeBSD和Linux下watch命令的不同，在Linux下，watch是周期性的执行下个程序，并全屏显示执行结果，如：<code>watch -n 1 -d netstat -ant</code>，而在FreeBSD下的watch命令是查看其它用户的正在运行的操作，watch允许你偷看其它terminal正在做什么，该命令只能让超级用户使用。</p>


</body>
</html>